# üîÑ Status Transition Rules - PS Ticket Process Bot

## üìã Overview

The PS Ticket Process Bot now implements intelligent status transitions based on issue type and field validation results. The system follows specific business rules to automatically suggest appropriate status transitions.

## üéØ Status Transition Logic

### **Rule 1: Unreproducible Bug**

**Condition**: Issue Type = "Unreproducible Bug"

**Validation**: Only check 2 fields:
- ‚úÖ **Description**: Must be ‚â• 10 characters
- ‚úÖ **Customer Login Details**: Must contain login-related keywords

**Status Transitions**:
- ‚úÖ **Pass**: ‚Üí `Dev investigating`
- ‚ùå **Fail**: ‚Üí `Pending_CSC`

**Special Comment**: 
> "It's unreproducible bug, need Dev to help check the logs and investigating"

---

### **Rule 2: Other Issue Types (Problem, Bug, Support Request)**

**Condition**: Issue Type ‚â† "Unreproducible Bug"

**Validation**: Check all 9 required fields:
1. **PIC** (Person in Charge)
2. **Customer Login Details**
3. **Top 450 Merchants Impact**
4. **Product/System**
5. **Priority**
6. **Steps to Reproduce**
7. **Actual Result**
8. **Expected Result**
9. **Description**

**Status Transitions**:
- ‚úÖ **Pass** (Score ‚â• 50% OR Issues ‚â§ 4): ‚Üí `QA investigating`
- ‚ùå **Fail** (Score < 50% AND Issues > 4): ‚Üí `Pending_CSC`

## üìä Implementation Results

### **PS-1762 Test Results**

**Ticket Details**:
- Issue Type: Problem
- Current Status: Cancelled
- Quality Score: 44/100 (Low)
- Issues Found: 8

**Status Transition**:
- **Rule Applied**: Rule 2 (Other Issue Types)
- **Validation Result**: Failed (Score 44% < 50% AND Issues 8 > 4)
- **Suggested Status**: `Pending_CSC` ‚úÖ
- **Comment Posted**: Comprehensive guidance with missing field details

## üß™ Test Scenarios Validated

### ‚úÖ **Scenario 1: Unreproducible Bug - Complete**
- **Input**: Description + Customer Login Details ‚úÖ
- **Expected**: Dev investigating
- **Result**: ‚úÖ Dev investigating

### ‚úÖ **Scenario 2: Unreproducible Bug - Incomplete**
- **Input**: Short description, no login details ‚ùå
- **Expected**: Pending_CSC
- **Result**: ‚úÖ Pending_CSC

### ‚úÖ **Scenario 3: Problem - High Quality**
- **Input**: All 9 fields complete ‚úÖ
- **Expected**: QA investigating
- **Result**: ‚úÖ QA investigating

### ‚úÖ **Scenario 4: Problem - Low Quality**
- **Input**: Most fields missing ‚ùå
- **Expected**: Pending_CSC
- **Result**: ‚úÖ Pending_CSC

### ‚úÖ **Scenario 5: PS-1762 Real Test**
- **Input**: Problem type, 8 missing fields ‚ùå
- **Expected**: Pending_CSC
- **Result**: ‚úÖ Pending_CSC

## üí¨ Comment Generation

### **Unreproducible Bug Comments**

```
Hello [Reporter],

Thank you for reporting this unreproducible bug. 

**Issue Classification:**
- Type: Unreproducible Bug
- Status Transition: [Dev investigating | Pending_CSC]

**Assessment:**
This issue requires developer investigation to check logs and system behavior since it cannot be consistently reproduced.

**Next Steps:**
It's unreproducible bug, need Dev to help check the logs and investigating.

Our development team will review the system logs and investigate the underlying cause of this intermittent issue.

[Duplicate tickets if found]

---
*This comment was automatically generated by PS Ticket Process Bot on [timestamp]*
```

### **Standard Issue Comments**

**High Quality (QA investigating)**:
```
Hello [Reporter],

Thank you for submitting this well-detailed ticket!

**Quality Assessment:**
- Overall Quality Score: [score]/100 (High Quality)
- All required information is properly provided
- Status Transition: QA investigating

**Next Steps:**
Our QA team will begin investigating this issue shortly. We have all the necessary information to proceed with the investigation.

[Duplicate tickets if found]

**Next Steps:**
Our QA team will begin the investigation process. We'll keep you updated on our progress and reach out if we need any additional information.

Thank you for providing comprehensive information!

---
*This comment was automatically generated by PS Ticket Process Bot on [timestamp]*
```

**Low Quality (Pending_CSC)**:
```
Hello [Reporter],

Thank you for submitting this ticket. To help us investigate this issue effectively, we need some additional information.

**Quality Assessment:**
- Overall Quality Score: [score]/100 (Needs Improvement)
- Status Transition: Pending_CSC

**Required Information:**
- [List of missing fields]

[Duplicate tickets if found]

**Next Steps:**
Please update this ticket with the requested information so we can assist you effectively. Once we have this information, we'll begin our investigation.

---
*This comment was automatically generated by PS Ticket Process Bot on [timestamp]*
```

## üéØ Business Benefits

### **Automated Triage**
- ‚úÖ **Unreproducible Bugs**: Automatically routed to Dev team
- ‚úÖ **Complete Tickets**: Fast-tracked to QA investigation
- ‚úÖ **Incomplete Tickets**: Routed back to CSC for completion

### **Improved Efficiency**
- ‚úÖ **Reduced Manual Review**: Automated quality assessment
- ‚úÖ **Faster Resolution**: Proper routing from the start
- ‚úÖ **Clear Guidance**: Users know exactly what information to provide

### **Quality Assurance**
- ‚úÖ **Consistent Standards**: All tickets meet quality requirements
- ‚úÖ **Complete Information**: Teams get all necessary details upfront
- ‚úÖ **Proper Classification**: Issues routed to correct teams

## üîß Technical Implementation

### **Status Transition Function**
```python
def determine_status_transition(issue_type, quality_result, fields):
    if issue_type == "Unreproducible Bug":
        # Check only Description + Customer Login Details
        return "Dev investigating" if both_present else "Pending_CSC"
    else:
        # Check all 9 required fields
        score = quality_result["score"]
        issues_count = len(quality_result["issues"])
        return "QA investigating" if (score >= 50 or issues_count <= 4) else "Pending_CSC"
```

### **Integration Points**
- ‚úÖ **Quality Engine**: Enhanced with 12 validation rules
- ‚úÖ **Comment Generator**: Type-specific comment templates
- ‚úÖ **JIRA Integration**: Status transition suggestions
- ‚úÖ **Duplicate Detection**: Integrated into all comment types

## üöÄ Production Ready

The status transition system is now:
- ‚úÖ **Tested**: All scenarios validated
- ‚úÖ **Documented**: Complete rule specification
- ‚úÖ **Integrated**: Works with existing quality engine
- ‚úÖ **Flexible**: Easy to modify rules and thresholds
- ‚úÖ **Comprehensive**: Handles all issue types and quality levels

**Ready for deployment with intelligent automated ticket routing!** üéØ
